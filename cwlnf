def workflow main() (results File[]) {
  sequences = File('data/sample.fa')

  records = run tool (sequences) (records File[]) {
    awk '/^>/{f="seq_"++d} {print > f}' < $(inputs.sequences)
    records = File("seq_*")
  }

  results = run tool (x) (result File) {
#!/bin/sh <<<
cat $(inputs.x) | rev > out
>>>
    result = File('out')
  } for each (x) in (records)
}
