def tool makerdfs(schema File, target_path string) {
  python -mschema_salad --print-rdfs
  rdfs = File("stdout")
  targetdir = string(inputs.target_path.match(/^([^/]+)\/[^/]/)[1])
}

def workflow main(
  render struct {
    source File,
    renderlist? string[],
    redirect? string[],
    target string,
    brandlink string,
    brandimg string,
    primtype? string,
    extra File
  }[],
  schemas struct {
    schema_in File,
    context_target string,
    rdfs_target string,
    graph_target string
  }[],
  brandimg File
) {

  (rdfs, targetdir) = makerdfs(schema=$(inputs.schema.schema_in),
                             target_path=$(inputs.schema.rdfs_target)
			     ) for each schema in schemas

  return (rdfs, targetdir)
}